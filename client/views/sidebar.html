<div class="sidebar">
  
    <div layout="row" layout-padding layout-align="space-between center" style="padding-left:24px">
      <div layout="column" layout-align="start start">
        <h2 style="margin-bottom:0px">{{model.name}}</h2>
        <p style="margin:2px 8px">{{model.email}}</p>
      </div>

      <md-menu ng-show="type=='reseller'||type=='customer'">
        <md-button aria-label="interactions menu" class="md-icon-button" ng-click="openMenu($mdOpenMenu, $event)">
          <md-icon md-menu-origin md-svg-icon="drop_down" style="color:red;"></md-icon>
        </md-button>
        <md-menu-content width="4">
          
          <md-menu-item ng-show="type=='reseller'||type=='customer'">
            <md-button ng-click="deleteModel(model)">
              <md-icon md-svg-icon="close" md-menu-align-target></md-icon>
              Delete
            </md-button>
          </md-menu-item>

          <md-menu-item ng-show="type=='device'">
            <md-button ng-click="sendCommand(model)">
              <md-icon md-svg-icon="upload" md-menu-align-target></md-icon>
              Send Command
            </md-button>
          </md-menu-item>

        </md-menu-content>
      </md-menu>

    </div>
    
    <md-divider></md-divider>
    <div layout-padding>
      <md-input-container ng-show="type=='cloud'||type=='reseller'" >
        <label>Event Server URL</label>
        <input required name="description" ng-model="model.eventServerUrl" ng-disabled="!canModifyEventUrl(model)" ng-model-options="{updateOn: 'default blur', debounce: {default: 500, blur: 0} }">
      </md-input-container>
                  
      <md-input-container ng-show="type=='cloud'||type=='reseller'">
        <label>Image Server URL</label>
        <input type="text" class="form-control focus" name="imageServerUrl"  autocomplete="off" required ng-model="model.imageServerUrl" ng-disabled="!canModifyImageServerUrl(model)" ng-model-options="{updateOn: 'default blur', debounce: {default: 500, blur: 0} }">
      </md-input-container>

      <md-input-container ng-show="type=='cloud'||type=='reseller'||type=='customer'||type=='device'">
        <label>Check-in Interval</label>
        <input type="number" min="5" class="form-control focus" name="checkinInterval" autocomplete="off" required ng-model="model.checkinInterval" ng-disabled="!canModifyCheckinInterval(model)" ng-model-options="{updateOn: 'default blur', debounce: {default: 500, blur: 0} }">
      </md-input-container>
      <div>
      <md-input-container ng-show="type=='cloud'||type=='reseller'||type=='customer'||type=='device'">
        <label>Software Version</label>
        <md-select ng-model="model.softwareVersionId" ng-disabled="!canModifySoftwareVersion(model)">
          <md-option ng-repeat="softwareVersion in softwareVersions" value="{{softwareVersion.id}}" ng-selected="softwareVersion.id === model.softwareVersionId"> {{softwareVersion.name}}</md-option>
        </md-select>
        <md-button class="md-primary" ng-show="type=='cloud'" ng-click="openSoftwareVersionForm($event)">Add Version</md-button>
      </md-input-container>

      </div>


      <md-input-container ng-show="type=='cloud'">
        <label>Signalling Server</label>
        <input type="text" class="form-control focus" name="signallingServerUrl" autocomplete="off" required ng-model="model.signallingServerUrl" ng-disabled="!canModifySignallingServer(model)" ng-model-options="{updateOn: 'default blur', debounce: {default: 500, blur: 0} }">
      </md-input-container>
      <div ng-show="type=='customer'">

        <md-subheader class="md-no-sticky">Licenses</md-subheader>
        <md-divider></md-divider>
        <md-list style="max-height:300px; overflow-y: scroll;">
          <md-list-item ng-repeat="license in model.licenses" ng-click="showLicense(license)">
            <p>{{license.key}}</p>

            <md-icon>
              <div style="height:75%;width:75%;background-color:{{license.activated ? '#26B326' : 'gray'}};border-radius:45px;"></div>
               <md-tooltip md-direction="left">
                  {{license.activated ? 'In Use' : 'Available'}}
                </md-tooltip>
            </md-icon>
          </md-list-item>

        </md-list>
        
        <md-button class="md-primary" ng-click="addLicense(model.id)">Add Licenses</md-button>
      </div>

      <div ng-show="type=='cloud'||type=='reseller'||type=='customer'">


        <md-list style="max-height:300px; overflow-y: scroll;" ng-if="filters.length">
          <md-subheader class="md-no-sticky">POS Filters ({{filters.length}})</md-subheader>
          <md-list-item ng-repeat="filter in ownedFilters">
            <md-checkbox class="md-primary" ng-if="type!='cloud'" ng-model="filter.selected" ng-change="filterChanged(filter)" aria-label="Check"></md-checkbox>
            <p>{{filter.name}}</p>

            <div class="actions" >
              <md-icon class="md-secondary material-icons" ng-click="actionFilter(filter)" aria-label="{{filter.owner ? 'edit': 'show'}}" md-svg-icon="{{filter.owner ? 'edit': 'info'}}">
              </md-icon>
            </div>
          </md-list-item>

          <md-divider></md-divider>
          <md-list-item ng-repeat="filter in cascadedFilters">
            <md-checkbox class="md-primary" ng-if="type!='cloud'" ng-model="filter.selected" ng-change="filterChanged(filter)" aria-label="Check"></md-checkbox>
            <p>{{filter.name}}</p>

            <div class="actions" >
              <md-icon class="md-secondary material-icons" ng-click="actionFilter(filter)" aria-label="{{filter.owner ? 'edit': 'show'}}" md-svg-icon="{{filter.owner ? 'edit': 'info'}}">
              </md-icon>
            </div>
          </md-list-item>
          <md-divider></md-divider>
        </md-list>

        <md-button class="md-primary" ng-click="addFilter(model.id)">Add POS Filter</md-button>
      </div>

      <div ng-show="type=='cloud'||type=='reseller'||type=='customer'">


        <md-list style="max-height:300px; overflow-y: scroll;" ng-if="searchFilters.length">
          <md-subheader class="md-no-sticky">Search Filters ({{searchFilters.length}})</md-subheader>
          <md-list-item ng-repeat="filter in ownedSearchFilters">
            <md-checkbox class="md-primary" ng-if="type!='cloud'" ng-model="filter.selected" ng-change="filterChanged(filter)" aria-label="Check"></md-checkbox>
            <p>{{filter.name}}</p>

            <div class="actions" >
              <md-icon class="md-secondary material-icons" ng-click="actionFilter(filter)" aria-label="{{filter.owner ? 'edit': 'show'}}" md-svg-icon="{{filter.owner ? 'edit': 'info'}}">
              </md-icon>
            </div>
          </md-list-item>

          <md-divider></md-divider>
          <md-list-item ng-repeat="filter in cascadedSearchFilters">
            <md-checkbox class="md-primary" ng-if="type!='cloud'" ng-model="filter.selected" ng-change="filterChanged(filter)" aria-label="Check"></md-checkbox>
            <p>{{filter.name}}</p>

            <div class="actions" >
              <md-icon class="md-secondary material-icons" ng-click="actionSearchFilter(filter)" aria-label="{{filter.owner ? 'edit': 'show'}}" md-svg-icon="{{filter.owner ? 'edit': 'info'}}">
              </md-icon>
            </div>
          </md-list-item>
          <md-divider></md-divider>
        </md-list>

        <md-button class="md-primary" ng-click="addSearchFilter(model.id)">Add Search Filter</md-button>
      </div>
    </div>
</div>